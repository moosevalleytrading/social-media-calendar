<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Emilie's 30-Day Social Media Content Calendar</title>
  
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
  
  <style>
    :root {
      /* Brand Colors */
      --primary-color: #37302E;
      --secondary-color: #CFDAD7;
      --background-color: #EBEBE4;
      --text-color: #37302E;
      --instagram-color: #C13584;
      --tiktok-color: #000000;
      --accent-color: #27ae60;
      --accent-hover: #2ecc71;
    }

    /* Global Styles */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Roboto', sans-serif;
      background-color: var(--background-color);
      color: var(--text-color);
      line-height: 1.6;
      padding: 20px;
    }

    /* =========== Calendar Styles =========== */
    .calendar {
      max-width: 1400px;
      margin: 0 auto;
      padding: 20px;
    }

    .calendar-header {
      font-family: 'Montserrat', sans-serif;
      text-align: center;
      color: var(--primary-color);
      text-transform: uppercase;
      margin-bottom: 30px;
      font-size: 2.5rem;
      letter-spacing: 2px;
    }

    .calendar-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
    }

    .calendar-day {
      background-color: var(--secondary-color);
      border-radius: 16px;
      padding: 20px;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1);
      transition: all 0.3s ease;
      position: relative;
    }

    .calendar-day:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 16px rgba(0,0,0,0.2);
    }

    .calendar-day.instagram {
      border: 2px solid var(--instagram-color);
    }

    .calendar-day.tiktok {
      border: 2px solid var(--tiktok-color);
    }

    .calendar-day.completed {
      background-color: rgba(55, 48, 46, 0.1);
    }

    .day-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    .day-date {
      font-weight: bold;
      color: var(--primary-color);
      font-size: 1.2rem;
    }

    .day-task {
      margin-bottom: 10px;
      font-size: 1rem;
    }

    .day-task.completed {
      text-decoration: line-through;
      color: rgba(55, 48, 46, 0.6);
    }

    .day-notes {
      font-style: italic;
      color: rgba(55, 48, 46, 0.7);
      margin-top: 10px;
      font-size: 0.9rem;
    }

    @media (max-width: 768px) {
      .calendar-grid {
        grid-template-columns: 1fr;
      }
    }

    /* =========== SEO Dashboard Styles =========== */
    #seo-dashboard {
      max-width: 1200px;
      margin: 2rem auto;
      padding: 20px;
      background-color: #fff;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }

    #seo-dashboard h2 {
      text-align: center;
      color: var(--primary-color);
      margin-bottom: 1rem;
      font-family: 'Montserrat', sans-serif;
    }

    #seo-dashboard .section-title {
      font-size: 1.25rem;
      margin-bottom: 0.5rem;
      color: var(--primary-color);
      margin-top: 2rem;
    }

    #seo-dashboard textarea {
      width: 100%;
      height: 200px;
      font-family: monospace;
      margin-bottom: 1rem;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
      resize: vertical;
    }

    #seo-dashboard button {
      background: var(--accent-color);
      color: #fff;
      border: none;
      padding: 0.5rem 1rem;
      cursor: pointer;
      font-size: 1rem;
      margin: 0.5rem 0;
      border-radius: 5px;
      transition: background 0.3s ease;
    }

    #seo-dashboard button:hover {
      background: var(--accent-hover);
    }

    #seo-dashboard .chart-container {
      background: #fff;
      border-radius: 5px;
      padding: 1rem;
      margin-bottom: 2rem;
      box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }

    #seo-dashboard canvas {
      width: 100%;
      max-height: 400px;
    }

    #seo-error-container {
      color: #c0392b;
      font-weight: bold;
      margin-top: 1rem;
    }
  </style>
</head>
<body>

  <!-- =========== 30-Day Calendar Section =========== -->
  <div class="calendar">
      <h1 class="calendar-header">30-Day Social Media Content Calendar</h1>
      <div id="calendar-days" class="calendar-grid"></div>
  </div>

  <!-- =========== SEO Dashboard Section =========== -->
  <div id="seo-dashboard">
      <h2>SEO Dashboard</h2>
      
      <p class="section-title">1) Paste Your CSV Data Below</p>
      <textarea id="csvTextarea"></textarea>
      <button id="parseButton">Parse &amp; Generate Charts</button>
      <div id="seo-error-container"></div>

      <h3 class="section-title">2) SEO Metrics Visualization</h3>
      
      <div class="chart-container">
          <canvas id="trafficChart"></canvas>
      </div>

      <div class="chart-container">
          <canvas id="keywordPositionChart"></canvas>
      </div>
  </div>

  <!-- =========== Existing Calendar Script =========== -->
  <script>
    // Comprehensive 32-day social media content schedule
    const initialSchedule = [
        { 
            id: 1,
            date: 'Mon, Dec 16, 2024', 
            tasks: 'Instagram Reel + Like and comment on 5 target accounts before and after posting',
            platform: 'Instagram',
            completed: false,
            notes: ''
        },
        /* ... truncated for brevity ... */
        { 
            id: 32,
            date: 'Thu, Jan 16, 2025', 
            tasks: 'Instagram Reel (final day recap) + engage with 5 accounts before/after',
            platform: 'Instagram',
            completed: false,
            notes: ''
        }
    ];

    function renderCalendar() {
      const calendarDays = document.getElementById('calendar-days');
      calendarDays.innerHTML = '';

      initialSchedule.forEach(day => {
          const dayElement = document.createElement('div');
          dayElement.classList.add('calendar-day');
          
          if (day.platform.toLowerCase().includes('instagram')) {
              dayElement.classList.add('instagram');
          } else if (day.platform.toLowerCase().includes('tiktok')) {
              dayElement.classList.add('tiktok');
          }

          if (day.completed) {
              dayElement.classList.add('completed');
          }

          dayElement.innerHTML = `
              <div class="day-header">
                  <div class="day-date">${day.date}</div>
                  <input type="checkbox" ${day.completed ? 'checked' : ''} onchange="toggleCompletion(${day.id})">
              </div>
              <div class="day-task ${day.completed ? 'completed' : ''}">
                  ${day.tasks}
              </div>
              ${day.notes ? `<div class="day-notes">Notes: ${day.notes}</div>` : ''}
          `;

          calendarDays.appendChild(dayElement);
      });
    }

    function toggleCompletion(id) {
      const dayToUpdate = initialSchedule.find(day => day.id === id);
      if (dayToUpdate) {
          dayToUpdate.completed = !dayToUpdate.completed;
          renderCalendar();
      }
    }

    // Initial render
    renderCalendar();
  </script>

  <!-- =========== SEO Dashboard Dependencies =========== -->
  <!-- PapaParse for CSV parsing -->
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.2/papaparse.min.js"></script>
  <!-- Chart.js for charts -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.2.1/dist/chart.umd.min.js"></script>

  <!-- =========== SEO Dashboard Script =========== -->
  <script>
    /********************************************
     * 1) CSV DATA SECTION
     *    Replace the contents of the `csvData` variable 
     *    with your own CSV if you want it pre-filled,
     *    OR just leave it empty and paste CSV into
     *    the textarea at runtime.
     ********************************************/
    var csvData = `
#    Keyword    Volume    KD    CPC    Previous organic traffic    Current organic traffic    Organic traffic change    ...
1    does beef tallow clog pores    1000    0    0.03    0    32    32    ...
2    beef tallow skin before and after    1800    0    0.23    ...
... (truncate or remove if you prefer to paste in real-time)
`;

    // DOM elements
    const csvTextarea = document.getElementById("csvTextarea");
    const parseButton = document.getElementById("parseButton");
    const errorContainer = document.getElementById("seo-error-container");

    // Pre-populate the text area with default CSV (optional)
    csvTextarea.value = csvData.trim();

    // Chart.js references
    let trafficChart;
    let keywordPositionChart;

    // On-click event to parse CSV and generate charts
    parseButton.addEventListener("click", () => {
      errorContainer.textContent = ""; // Clear any previous errors

      // Read CSV data from textarea
      const inputData = csvTextarea.value.trim();

      if (!inputData) {
        errorContainer.textContent = "Error: No CSV data provided.";
        return;
      }

      // Parse using Papa Parse
      Papa.parse(inputData, {
        header: true,
        skipEmptyLines: true,
        complete: function(results) {
          if (results.errors && results.errors.length > 0) {
            // Display the first error for brevity
            errorContainer.textContent = "Parsing Error: " + results.errors[0].message;
            return;
          }
          // Process the CSV data
          generateCharts(results.data);
        }
      });
    });

    /**
     * Generate Charts
     * @param {Array} data - Parsed CSV data (array of objects).
     */
    function generateCharts(data) {
      try {
        // =============================
        // 1) Traffic Trend (Line Chart)
        // =============================
        const previousTrafficPoints = [];
        const currentTrafficPoints = [];

        data.forEach((row, index) => {
          const prevDateStr = row["Previous date"] ? row["Previous date"].trim() : "";
          const currDateStr = row["Current date"] ? row["Current date"].trim() : "";
          const prevTrafficStr = row["Previous organic traffic"] ? row["Previous organic traffic"].trim() : "";
          const currTrafficStr = row["Current organic traffic"] ? row["Current organic traffic"].trim() : "";

          const prevTraffic = prevTrafficStr !== "" ? parseFloat(prevTrafficStr) : null;
          const currTraffic = currTrafficStr !== "" ? parseFloat(currTrafficStr) : null;

          let prevDate = new Date(prevDateStr);
          if (isNaN(prevDate.getTime())) {
            prevDate = index; // fallback if date can't parse
          }
          let currDate = new Date(currDateStr);
          if (isNaN(currDate.getTime())) {
            currDate = index;
          }

          if (prevTraffic !== null && !isNaN(prevTraffic)) {
            previousTrafficPoints.push({ x: prevDate, y: prevTraffic });
          }
          if (currTraffic !== null && !isNaN(currTraffic)) {
            currentTrafficPoints.push({ x: currDate, y: currTraffic });
          }
        });

        // Sort by x if we used actual Date objects
        previousTrafficPoints.sort((a, b) => +a.x - +b.x);
        currentTrafficPoints.sort((a, b) => +a.x - +b.x);

        // Destroy existing chart instances if re-parsing
        if (trafficChart) trafficChart.destroy();

        const trafficCtx = document.getElementById("trafficChart").getContext("2d");
        trafficChart = new Chart(trafficCtx, {
          type: "line",
          data: {
            datasets: [
              {
                label: "Previous Organic Traffic",
                data: previousTrafficPoints,
                borderColor: "#3498db",
                backgroundColor: "rgba(52, 152, 219, 0.1)",
                tension: 0.2
              },
              {
                label: "Current Organic Traffic",
                data: currentTrafficPoints,
                borderColor: "#e67e22",
                backgroundColor: "rgba(230, 126, 34, 0.1)",
                tension: 0.2
              }
            ]
          },
          options: {
            responsive: true,
            scales: {
              x: {
                type: "time",
                time: {
                  unit: "day"
                },
                title: {
                  display: true,
                  text: "Date / Index"
                }
              },
              y: {
                beginAtZero: true,
                title: {
                  display: true,
                  text: "Organic Traffic"
                }
              }
            }
          }
        });

        // =============================
        // 2) Keyword Position (Bar Chart)
        // =============================
        const keywordLabels = [];
        const positionChanges = [];

        data.forEach((row) => {
          const keyword = row["Keyword"] ? row["Keyword"].trim() : "";
          const positionChangeStr = row["Position change"] ? row["Position change"].trim() : "";

          if (keyword && positionChangeStr) {
            keywordLabels.push(keyword);
            positionChanges.push(parseFloat(positionChangeStr));
          }
        });

        if (keywordPositionChart) keywordPositionChart.destroy();

        const positionCtx = document.getElementById("keywordPositionChart").getContext("2d");
        keywordPositionChart = new Chart(positionCtx, {
          type: "bar",
          data: {
            labels: keywordLabels,
            datasets: [
              {
                label: "Position Change",
                data: positionChanges,
                backgroundColor: "rgba(46, 204, 113, 0.6)",
                borderColor: "#2ecc71",
                borderWidth: 1
              }
            ]
          },
          options: {
            responsive: true,
            scales: {
              x: {
                ticks: {
                  maxRotation: 90,
                  minRotation: 45
                },
                title: {
                  display: true,
                  text: "Keywords"
                }
              },
              y: {
                beginAtZero: true,
                title: {
                  display: true,
                  text: "Position Change"
                }
              }
            }
          }
        });

      } catch (err) {
        errorContainer.textContent = "Error generating charts: " + err.message;
      }
    }
  </script>

</body>
</html>
